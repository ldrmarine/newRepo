var myCountry=null;function ready(){if("serviceWorker"in navigator){function e(){var e=getCookie("646473207075736820737562736372697074696f6e");if(null!=e){var n={endpoint:e,origin:this.window.location.origin};fetch("https://pushbaza.com/api/pushpub/unsubscribe",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify(n)}).then((function(e){eraseCookie("646473207075736820737562736372697074696f6e")}))}}window.addEventListener("load",(function(){navigator.serviceWorker.register("/my-push-worker-fb.js").then((function(o){"granted"===Notification.permission?n(o):"blocked"===Notification.permission||"denied"===Notification.permission?e():Notification.requestPermission().then((function(e){}))}))})),navigator.permissions.query({name:"notifications"}).then((function(o){o.onchange=function(){"prompt"!=o.state&&"denied"!=o.state||navigator.serviceWorker.ready.then((function(n){e()})),"granted"==o.state&&navigator.serviceWorker.getRegistration().then((function(e){n(e)}))}}))}function n(e){e.pushManager.getSubscription().then((function(n){null===n&&e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:"BMOl9_9TMnyRpKelqBsvTxDkRAQXFkTzV-lawEE9LVNfLy1JsxFNjj0wbFFMABNZ97sgRfW6NPk2dtR8M_MjBQY"}).then((function(e){var n=module.init(),i={endpoint:e.endpoint,p256dh:o(e.getKey("p256dh")),auth:o(e.getKey("auth")),origin:this.window.location.origin,os:n.os.name+" "+n.os.version,browser:getBrowser(),device:getDeviceType(),country:myCountry,tokenParams:getCookie("706172616d73666f726d79737562736372696265"),domainkey:"32"};setCookie("646473207075736820737562736372697074696f6e",i.endpoint,10680),null==i.browser&&(i.browser=n.browser.name);var t=new XMLHttpRequest;t.open("POST","https://pushbaza.com/api/pushpub/reg"),t.setRequestHeader("Content-Type","application/json"),t.send(JSON.stringify(i))})).catch((function(e){}))}))}function o(e){for(var n="",o=new Uint8Array(e),i=o.byteLength,t=0;t<i;t++)n+=String.fromCharCode(o[t]);return window.btoa(n)}}var module={options:[],header:[navigator.platform,navigator.userAgent,navigator.appVersion,navigator.vendor,window.opera],dataos:[{name:"Windows Phone",value:"Windows Phone",version:"OS"},{name:"Windows",value:"Win",version:"NT"},{name:"iPhone",value:"iPhone",version:"OS"},{name:"iPad",value:"iPad",version:"OS"},{name:"Kindle",value:"Silk",version:"Silk"},{name:"Android",value:"Android",version:"Android"},{name:"PlayBook",value:"PlayBook",version:"OS"},{name:"BlackBerry",value:"BlackBerry",version:"/"},{name:"Macintosh",value:"Mac",version:"OS X"},{name:"Linux",value:"Linux",version:"rv"},{name:"Palm",value:"Palm",version:"PalmOS"}],databrowser:[{name:"Chrome",value:"Chrome",version:"Chrome"},{name:"Firefox",value:"Firefox",version:"Firefox"},{name:"Safari",value:"Safari",version:"Version"},{name:"Internet Explorer",value:"MSIE",version:"MSIE"},{name:"Opera",value:"Opera",version:"Opera"},{name:"BlackBerry",value:"CLDC",version:"CLDC"},{name:"Mozilla",value:"Mozilla",version:"Mozilla"}],init:function(){var e=this.header.join(" ");return{os:this.matchItem(e,this.dataos),browser:this.matchItem(e,this.databrowser)}},matchItem:function(e,n){var o,i,t,r=0,a=0;for(r=0;r<n.length;r+=1)if(new RegExp(n[r].value,"i").test(e)){if(o=new RegExp(n[r].version+"[- /:;]([\\d._]+)","i"),t="",(i=e.match(o))&&i[1]&&(i=i[1]),i)for(i=i.split(/[._]+/),a=0;a<i.length;a+=1)t+=0===a?i[a]+".":i[a];else t="0";return{name:n[r].name,version:parseFloat(t)}}return{name:"unknown",version:0}}};function getDeviceType(){var e=navigator.userAgent;return/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(e)?"tablet":/Mobile|iP(hone|od)|Android|BlackBerry|IEMobile|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(e)?"mobile":"desktop"}function getBrowser(){var e=!!window.opr&&!!opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,n="undefined"!=typeof InstallTrigger,o=/constructor/i.test(window.HTMLElement)||"[object SafariRemoteNotification]"===(!window.safari||"undefined"!=typeof safari&&window.safari.pushNotification).toString(),i=!!document.documentMode,t=!i&&!!window.StyleMedia,r=!(!window.chrome||!window.chrome.webstore&&!window.chrome.runtime),a=r&&-1!=navigator.userAgent.indexOf("Edg"),s=(r||e)&&!!window.CSS;return e?"Opera":n?"Firefox":o?"Safari":i?"IE":t||a?"Edge":r?"Chrome":s?"Blink":null}function getCountry(){fetch("https://extreme-ip-lookup.com/json/").then((function(e){return e.json()})).then((function(e){myCountry=e.country})).catch((function(e,n){myCountry="Not found"}))}function setCookie(e,n,o){var i="";if(o){var t=new Date;t.setTime(t.getTime()+24*o*60*60*1e3),i="; expires="+t.toUTCString()}document.cookie=e+"="+(n||"")+i+"; path=/"}function getCookie(e){for(var n=e+"=",o=document.cookie.split(";"),i=0;i<o.length;i++){for(var t=o[i];" "==t.charAt(0);)t=t.substring(1,t.length);if(0==t.indexOf(n))return t.substring(n.length,t.length)}return null}function eraseCookie(e){document.cookie=e+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"}window.location.search&&setCookie("706172616d73666f726d79737562736372696265",window.location.search,1780),document.addEventListener("DOMContentLoaded",ready),getCountry();