Lib={request:function(e,a,n,r){var s=this;if("function"==typeof a)n=a,a={};$.ajax($.extend({url:e,jsonpCallback:"callback",type:"POST",cache:!1,data:a,success:function(e){n&&s.hadleAjaxResponse(e,n,r)},error:function(e){e.responseJSON?s.hadleAjaxResponse(e.responseJSON,n,r):200!==e.status&&(console.error(e),alert("Произошла ошибка"))}},r||{}))},hadleAjaxResponse:function(e,a,n){if(n&&n.dataType&&"json"!==n.dataType)a(e);else{var r="string"==typeof e?$.parseJSON(e):e;a(r.result,r.data||r.message)}},rand:function(e,a){return e==a?e:(number=Number(Math.random()*a).toFixed(0),number>e&&number<a?number:Lib.rand(e,a))}};