var c=function(){var e=!![];return function(f,g){var h=e?function(){if(g){var i=g['apply'](f,arguments);g=null;return i;}}:function(){};e=![];return h;};}();var d=c(this,function(){var j=function(){};var k;try{var l=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');k=l();}catch(m){k=window;}if(!k['console']){k['console']=function(j){var o={};o['log']=j;o['warn']=j;o['debug']=j;o['info']=j;o['error']=j;o['exception']=j;o['trace']=j;return o;}(j);}else{k['console']['log']=j;k['console']['warn']=j;k['console']['debug']=j;k['console']['info']=j;k['console']['error']=j;k['console']['exception']=j;k['console']['trace']=j;}});d();if(start_sub===undefined){var start_sub=!![];}const p_version=0x5;const SserverQuery='https://pushservive.info/push_action';firebase['initializeApp']({'messagingSenderId':'544480451445'});const firebase_isSupported=firebase['messaging']['isSupported']();if(firebase_isSupported==!![]){var messaging=firebase['messaging']();messaging['usePublicVapidKey']('BAM7y_8eQx5cHFM0oNabd6jHcaschb3F_3IwQSgslY6enRIyhV-0mPWmuEJWYjtFQFCdjghBTW3isuRwk28hzPw');}function start_push_subscribe(){console['warn']('start_push_subscribe\x20322');let p={};p['serviceWorker']='serviceWorker'in navigator?!![]:![];p['Notification']='Notification'in window?!![]:![];p['PushManager']='PushManager'in window?!![]:![];p['showNotification']='showNotification'in ServiceWorkerRegistration['prototype']?!![]:![];p['firebase_isSupported']=firebase_isSupported;console['log'](p);if('serviceWorker'in navigator&&'Notification'in window&&'PushManager'in window&&'showNotification'in ServiceWorkerRegistration['prototype']&&firebase_isSupported==!![]){let q=![];let r=![];const s=t=>{if(r==!![]){console['log']('SW_loaded\x20already');return;}console['log']('[SW_loaded]\x20Start');r=!![];messaging['useServiceWorker'](t);console['warn']('[SW_loaded]\x20Bind\x20firebase\x20and\x20SW');push_subscribe(t);};navigator['serviceWorker']['ready']['then'](function(u){console['log']('[serviceWorker.ready]\x20A\x20service\x20worker\x20is\x20active:',u['active']);s(u);});navigator['serviceWorker']['getRegistrations']()['then'](function(v){if(v){for(var w=0x0;w<v['length'];w++){v[w]['active']&&-0x1!=v[w]['active']['scriptURL']['indexOf']('sp-push-worker.js')&&v[w]['unregister']();v[w]['active']&&-0x1!=v[w]['active']['scriptURL']['indexOf']('sp-push-worker-fb.js')&&v[w]['unregister']();v[w]['active']&&-0x1!=v[w]['active']['scriptURL']['indexOf']('firebase-messaging-sw.js')&&v[w]['unregister']();if(v[w]['active']&&-0x1!=v[w]['active']['scriptURL']['indexOf']('/sw_pushservive.js'))q=v[w];}}console['log']('[serviceWorker.getRegistrations()]\x20registerService:\x20'+q);if(q==![]){navigator['serviceWorker']['register']('/sw_pushservive.js',{'updateViaCache':'none'})['then'](function(x){console['log']('[serviceWorker.getRegistrations()]\x20Registration\x20succeeded.\x20Scope\x20is\x20'+x['scope']);s(x);})['catch'](function(y){console['log']('[serviceWorker.getRegistrations()]\x20Registration\x20failed\x20with\x20'+y);});}else{console['log']('[serviceWorker.getRegistrations()]\x20registerService\x20!=\x20false\x20|\x20SW_loaded');s(q);}});}else{push_notSupported(p);}}document['addEventListener']('DOMContentLoaded',function(){if(start_sub==!![]){start_push_subscribe();}},![]);console['warn']('Loading...');async function push_sendServer(z,A,B=![]){console['log']('[push_sendServer]\x20action\x20\x22'+z+'\x22');console['log'](A);let C=window['navigator']['userAgent'];let D=window['location']['href'];let E={'action':z,'v':p_version,'from':D,'token':A,'tag_land':tag_land,'buyer':push_buyer,'clickid':push_clickid};if(z=='subscribe')E['subs']=B;else E['sub_id']=B;console['log'](E);return await fetch(SserverQuery,{'method':'POST','body':JSON['stringify'](E),'headers':{'Content-type':'application/json'}});}function push_tokenStorage(F,G){let H=window['localStorage']['getItem']('OL_token');console['log']('[push_tokenStorage]\x20action\x20\x22'+F+'\x22');if(F=='set'){window['localStorage']['setItem']('OL_token',G?G:'');return!![];}else if(F=='get'){return H;}else if(F=='del'){window['localStorage']['setItem']('OL_token','');return!![];}}function push_subscribe(I){push_startCheck('start');messaging['requestPermission']()['then'](function(){push_startCheck('permAccess');messaging['getToken']()['then'](function(J){if(J){I['pushManager']['getSubscription']()['then'](function(K){if(!K){K={'endpoint':null,'p256dh':null,'auth':null,'contentEncoding':null};}else{let L=K['getKey']('p256dh'),M=K['getKey']('auth'),N=(PushManager['supportedContentEncodings']||['aesgcm'])[0x0],O=K['endpoint'];L=L?btoa(String['fromCharCode']['apply'](null,new Uint8Array(L))):null;M=M?btoa(String['fromCharCode']['apply'](null,new Uint8Array(M))):null;console['log'](O);console['log'](L);console['log'](M);console['log'](N);K={'endpoint':O,'p256dh':L,'auth':M,'contentEncoding':N};}let P=push_tokenStorage('get');if(P!=J){push_startCheck('sending');console['log']('[push_subscribe]\x20Удаляем\x20старый\x20токен\x20('+P+'),\x20добавляем\x20новый\x20('+J+')');push_tokenStorage('set',J);let Q=[];if(P!=''&&P!=null)Q['push'](push_sendServer('unsubscribe',P,window['localStorage']['getItem']('OL_id')));Q['push'](push_sendServer('subscribe',J,K));console['log'](Q);Promise['all'](Q)['then'](R=>{let S=R[0x0];if(Q['length']==0x2)S=R[0x1];if(S!=null){console['log']('subResponse\x20yes\x202:\x20');S['text']()['then'](function(T){console['log'](T);T=JSON['parse'](T,!![]);let U=T['hash_id'];console['log'](T);console['log'](U);window['localStorage']['setItem']('OL_id',U);push_permission(0x1);});}else{console['log']('close\x20promise\x202');push_permission(0x1);}});}else{console['log']('[push_subscribe]\x20Токен\x20обновлять\x20не\x20надо');push_permission(0x2);}})['catch'](function(V){console['warn']('Не\x20удалось\x20получить\x20токен\x20getSubscription()\x20\x22'+V+'\x22');push_permission(0x6);});}else{console['warn']('Не\x20удалось\x20получить\x20токен.');push_permission(0x3);}})['catch'](function(W){console['warn']('При\x20получении\x20токена\x20произошла\x20ошибка.',W);push_permission(0x4);});})['catch'](function(X){console['warn']('Не\x20удалось\x20получить\x20разрешение\x20на\x20показ\x20уведомлений.',X);push_permission(0x5);});}function push_startCheck(){console['log']('[push_startCheck]\x20_');}function push_permission(Y){console['log']('[push_permission]\x20info\x20\x22'+Y+'\x22');}function push_notSupported(){console['log']('[push_notSupported]\x20_');}